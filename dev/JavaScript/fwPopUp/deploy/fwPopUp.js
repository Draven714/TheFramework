(function(c,j){function q(c,j){var c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),f=RegExp("[\\?&]"+c+"=([^&#]*)").exec(j);return null===f?"":f[1]}function N(c){var f=location.href;return(c=f.indexOf("#"+c)+1)?decodeURI(f.substring(c,f.length)):!1}function O(){if(window.pageYOffset)return{scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset};if(j.documentElement&&j.documentElement.scrollTop)return{scrollTop:j.documentElement.scrollTop,scrollLeft:j.documentElement.scrollLeft};if(j.body)return{scrollTop:j.body.scrollTop,
scrollLeft:j.body.scrollLeft}}var z=c.fwPopup={initialized:!1,version:"1.0.3"},f=c(window),w,x=f.height(),n=f.width();c.fn.fwPopup=function(r){var G,H;function T(a){a=n/2+I.scrollLeft-a/2;0>a&&(a=0);return a}function P(a){a=x/2+I.scrollTop-a/2;0>a&&(a=0);return a}function J(){p&&i&&(I=O(),i.css({top:P(i.height()),left:T(i.width())}))}function A(){if(!w.is(":animated")){i.stop().find("object,embed").css({visibility:"hidden"});var a=d.animationSpeed;c("div.fwpHolder,div.fwpTitle,.fwpFade").fadeOut(a,
function(){c(this).remove()});w.fadeOut(a,function(){d.hideFlash&&c("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css({visibility:"visible"});c(this).remove();f.off("scroll.fwPopup");var a=s;location.href.indexOf("#"+a)+1&&(location.hash=a);d.callback();p=!0})}}function k(a,c){Q(a,c);var e=!1,b=a,h=c;if((t>n||u>x)&&p&&d.allowResize&&!B){for(var e=!0,g=!1;!g;)t>n?(b=n-200,h=c/a*b):u>x?(h=x-200,b=a/c*h):g=!0,u=h,t=b;(t>n||u>x)&&k(t,u);Q(b,h)}return{width:Math.floor(b),height:Math.floor(h),
containerHeight:Math.floor(u),containerWidth:Math.floor(t)+2*d.horizontalPadding,contentHeight:Math.floor(K),contentWidth:Math.floor(R),resized:e}}function Q(a,e){var a=parseFloat(a),e=parseFloat(e),b=i.find(".fwpDetails");b.width(a);var f=parseFloat(b.css("marginTop"))+parseFloat(b.css("marginBottom")),b=b.clone().addClass(d.theme).width(a).appendTo(c("body")).css({position:"absolute",top:-1E4}),f=f+b.height(),f=34>=f?36:f;b.remove();b=i.find(".fwpTitle");b.width(a);var h=parseFloat(b.css("marginTop"))+
parseFloat(b.css("marginBottom")),b=b.clone().appendTo(c("body")).css({position:"absolute",top:-1E4}),h=h+b.height();b.remove();K=e+f;R=a;u=K+h+i.find(".fwpTop").height()+i.find(".fwpBottom").height();t=a}function U(a){return a.match(/youtube\.com\/watch/i)||a.match(/youtu\.be/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":a.match(/\b.mov\b/i)?"quicktime":a.match(/\b.swf\b/i)?"flash":a.match(/\b.(mp3|ogg)\b/i)?(G="mpeg",H="mp3",a.match(/\b.ogg\b/i)&&(G="ogg",H="vorbis"),"audio"):a.match(/\biframe=true\b/i)?
"iframe":a.match(/\bajax=true\b/i)?"ajax":a.match(/\bcustom=true\b/i)?"custom":"#"==a.substr(0,1)?"inline":"image"}function S(){d=r;var a=c(this),e=d.hook;b=a.attr("href");L=a.find("img").attr("alt");C=a.data();D=a.attr("title");E=c("a["+e+"^='"+s+"']").index(a);d.socialTools?(d.socialTools=d.socialTools.replace("{location_href}",encodeURIComponent(location.href)),d.markup=d.markup.replace("{social_buttons}",d.socialTools)):d.markup=d.markup.replace("{social_buttons}","");c("body").append(d.markup);
i=c(".fwpHolder").addClass(d.theme);y=c(".fwpTitle");w=c(".overlay").css({opacity:0,height:c(j).height(),width:f.width()}).on("click",function(){d.modal||A()});c("a.button-close").off("click").on("click",function(a){a.preventDefault();A()});if(d.allowExpand)c(".fwpContent .button-expand").off("click").on("click",function(){c(this).hasClass("button-expand")?(c(this).removeClass("button-expand").addClass("button-contract").attr({"aria-label":"Contract the image",title:"Contract the image"}),p=!1):(c(this).removeClass("button-contract").addClass("button-expand").attr({"aria-label":"Expand the image",
title:"Expand the image"}),p=!0);var a=M;i.find("#fwpFullRes object,#fwpFullRes embed").css({visibility:"hidden"});i.find(".fwpFade").fadeOut(d.animationSpeed,function(){c(".fwpLoader").show();a()});return!1});d.hideFlash&&c("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css({visibility:"hidden"});d.showTitle&&L?y.html(unescape(L)):y.addClass("no_content").html("");D?i.find(".fwpDescription").show().html(unescape(D)):i.find(".fwpDescription").hide();J();if(d.allowResize)f.on("scroll.fwPopup",
J);M();return!1}function M(){c(".fwpLoader").show();d.deepLinking&&"undefined"!=typeof s&&(location.hash=s+(E||0===E?"/"+E+"/":""));y.is(":hidden")&&y.css("opacity",0).show();w.show().fadeTo(d.animationSpeed,d.opacity);var a=parseFloat(q("width",b))?q("width",b):d.defaultWidth.toString(),l=parseFloat(q("height",b))?q("height",b):d.defaultHeight.toString();B=!1;l.indexOf("%")+1&&(l=parseFloat(f.height()*parseFloat(l)/100-150),B=!0);a.indexOf("%")+1&&(a=parseFloat(f.width()*parseFloat(a)/100-150),B=
!0);i.fadeIn(d.animationSpeed,function(){var f=0,j=0,h;switch(U(b)){case "ajax":p=!1;e=k(a,l);j=p=!0;c.get(b,function(a){m=d.inlineMarkup.replace(/{content}/g,a);i.find("#fwpFullRes")[0].innerHTML=m;F()});break;case "audio":f=new Image;f.onload=function(){var a=new Audio,h=C.image?'<img src="'+C.image+'" alt="Cover for '+D+'"/>':"",g=d.audioMarkup.replace(/{type}/g,G),g=g.replace(/{codec}/g,H),g=g.replace(/{image}/g,h);i.find("#fwpFullRes")[0].innerHTML=g.replace(/{path}/g,b);c(".fwpContainer audio").width(f.width);
a.setAttribute("src",b);a.load();e=k(f.width,f.height+30);F()};f.src=C.image;break;case "custom":e=k(a,l);m=d.customMarkup;break;case "flash":e=k(a,l);var g=b.substring(b.indexOf("flashvars")+10,b.length);h=b.substring(0,b.indexOf("?"));m=d.flashMarkup.replace(/{width}/g,e.width).replace(/{height}/g,e.height).replace(/{wmode}/g,d.wmode).replace(/{path}/g,h+"?"+g);break;case "iframe":e=k(a,l);g=b.substr(0,b.indexOf("iframe")-1);m=d.iframeMarkup.replace(/{width}/g,e.width).replace(/{height}/g,e.height).replace(/{path}/g,
g);break;case "image":f=new Image;i.find("#fwpFullRes")[0].innerHTML=d.imageMarkup.replace(/{path}/g,b);f.onload=function(){e=k(f.width,f.height);F()};f.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");A()};f.src=b;break;case "inline":g=c(b).clone().append('<br clear="all">').css({width:d.defaultWidth}).wrapInner('<div id="fwpFullRes"><div class="fwpInline"></div></div>').appendTo(c("body")).show();p=!1;e=k(c(g).width(),c(g).height());p=!0;c(g).remove();
m=d.inlineMarkup.replace(/{content}/g,c(b).html());break;case "quicktime":e=k(a,l);e.height+=15;e.contentHeight+=15;e.containerHeight+=15;m=d.quicktimeMarkup.replace(/{width}/g,e.width).replace(/{height}/g,e.height).replace(/{wmode}/g,d.wmode).replace(/{path}/g,b).replace(/{autoplay}/g,d.autoPlay);break;case "vimeo":e=k(a,l);h=b.match(/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/);g=e.width+"/embed/?moog_width="+e.width;h="//player.vimeo.com/video/"+h[3]+"?title=0&byline=0&portrait=0";d.autoPlay&&(h+="&autoplay=1;");
m=d.iframeMarkup.replace(/{width}/g,g).replace(/{height}/g,e.height).replace(/{path}/g,h);break;case "youtube":e=k(a,l),g=q("v",b),g||(g=b.split("youtu.be/"),g=g[1],0<g.indexOf("?")&&(g=g.substr(0,g.indexOf("?"))),0<g.indexOf("&")&&(g=g.substr(0,g.indexOf("&")))),h="//www.youtube.com/embed/"+g,h=q("rel",b)?h+("?rel="+q("rel",b)):h+"?rel=1",d.autoPlay&&(h+="&autoplay=1"),m=d.iframeMarkup.replace(/{width}/g,e.width).replace(/{height}/g,e.height).replace(/{wmode}/g,d.wmode).replace(/{path}/g,h)}!f&&
!j&&(i.find("#fwpFullRes")[0].innerHTML=m,F())});return!1}function F(){c(".fwpLoader").hide();var a=P(e.containerHeight),b=d.animationSpeed;y.fadeTo(b,1);i.find(".fwpContent").animate({height:e.contentHeight,width:e.contentWidth},b);i.animate({top:a,left:0>n/2-e.containerWidth/2?0:n/2-e.containerWidth/2,width:e.containerWidth},b,function(){i.find(".fwpHoverContainer,#fullResImage").height(e.height).width(e.width);i.find(".fwpFade").fadeIn(b);d.allowExpand&&(e.resized?c("a.button-expand,a.button-contract").show():
c("a.button-expand").hide())});r.ajaxCallback()}var i,y,D,E,K,R,u,t,e,s,m="",C,b,B=!1,p=!0,I=O(),d,L,r=c.extend({hook:"data-fwPopup",hookWord:"fwPopup",animationSpeed:"fast",ajaxCallback:function(){},opacity:0.8,showTitle:!0,allowExpand:!0,allowResize:!0,defaultWidth:500,defaultHeight:344,theme:"default",horizontalPadding:20,hideFlash:!1,wmode:"opaque",autoPlay:!0,modal:!1,deepLinking:!0,keyboardAccessible:!0,callback:function(){},ie6Fallback:!0,markup:function(){var a=[];a.push('<div class="fwpHolder">');
a.push('<div class="fwpTitle"></div>');a.push('<div class="fwpTop">');a.push('<div class="fwpLeft"></div>');a.push('<div class="fwpMiddle"></div>');a.push('<div class="fwpRight"></div>');a.push("</div>");a.push('<div class="fwpContainer">');a.push('<div class="fwpLeft">');a.push("</div>");a.push('<div class="fwpContent fwpMiddle">');a.push('<div class="fwpLoader"></div>');a.push('<div class="fwpFade">');a.push('<a tabindex="0" class="button-expand" title="Expand the image" aria-label="Expand the image">Expand</a>');
a.push('<div id="fwpFullRes"></div>');a.push('<div class="fwpDetails">');a.push('<p class="fwpDescription"></p>');a.push('<div class="fwpSocial">{social_buttons}</div>');a.push('<a tabindex="0" class="button-close" title="Close the modal" aria-label="Close the modal">Close</a>');a.push("</div>");a.push("</div>");a.push("</div>");a.push('<div class="fwpRight">');a.push("</div>");a.push("</div>");a.push('<div class="fwpBottom">');a.push('<div class="fwpLeft"></div>');a.push('<div class="fwpMiddle"></div>');
a.push('<div class="fwpRight"></div>');a.push("</div>");a.push("</div>");a.push('<div class="overlay"></div>');return a.join("")}(),audioMarkup:'{image}<audio controls autoplay class="audioPlayback"><source src="{path}" type="audio/{type}" codec="{codec}"/></audio>',customMarkup:"",flashMarkup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true"/><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
iframeMarkup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',imageMarkup:'<img id="fullResImage" src="{path}"/>',inlineMarkup:'<div class="fwpInline">{content}</div>',quicktimeMarkup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="//www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',
socialTools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"><\/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden;width:500px;height:23px;" allowTransparency="true"></iframe></div>'},
r);s=r.hookWord;f.off("resize.fwPopup").on("resize.fwPopup",function(){x=f.height();n=f.width();w&&w.height(c(j).height()).width(n);J()});if(r.keyboardAccessible)c(j).off("keydown.fwPopup").on("keydown.fwPopup",function(a){if(i&&i.is(":visible"))switch(a.keyCode){case 27:a.preventDefault(),d.modal||A()}});z.close=A;z.initialize=S;z.open=M;if(!z.initialized&&N(s)){z.initialized=!0;var v=N(s),V=v.substring(v.indexOf("/")+1,v.length-1),v=v.substring(0,v.indexOf("/"));setTimeout(function(){c("a["+r.hook+
"^='"+v+"']:eq("+V+")").trigger("click")},50)}return this.off("click.fwPopup").on("click.fwPopup",S)}})(jQuery,document);